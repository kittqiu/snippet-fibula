"use strict";var UserInfoEdit=React.createClass({displayName:"UserInfoEdit",getPostData:function(){var e={name:this.refs.name.value.trim()};return validateJsonObj("userEdit",e)?e:void 0},handleSubmit:function(e){e.preventDefault();var t,a=$("#form_edit").find("form");try{t=this.getPostData(),a.showFormError()}catch(e){return void a.showFormError(e)}a.postJSON("/api/user/"+this.props.uid,t,function(e,t){e||($("#content-block").addClass("uk-hidden"),jumpTo(t.redirect,"首页",2))}.bind(this))},loadData:function(){getJSON("/api/user/"+this.props.uid,{},function(e,t){e?fatal(e):this.setState({name:t.name,username:t.username,email:t.email})}.bind(this))},handleNameChange:function(e){this.setState({name:e.target.value})},getInitialState:function(){return{username:"",email:"",name:""}},componentDidMount:function(){this.loadData()},render:function(){var e={marginTop:"40px",width:"480px"},t={maxWidth:"800px"};return React.createElement("div",{style:t},React.createElement("h1",{className:"uk-text-center"},React.createElement("b",null,"修改个人信息")),React.createElement("div",{className:"uk-text-right"}),React.createElement("hr",{className:"dv-hr"}),React.createElement("div",{id:"form_edit"},React.createElement("form",{onSubmit:this.handleSubmit,className:"uk-form uk-form-stacked uk-form-horizontal"},React.createElement("fieldset",null,React.createElement("div",{className:"uk-alert uk-alert-danger uk-hidden"}),React.createElement("div",{className:"uk-form-row uk-width-1-3"},React.createElement("label",{className:"uk-form-label"},"用户名"),React.createElement("div",{className:"uk-form-controls"},this.state.username)),React.createElement("div",{className:"uk-form-row uk-width-2-3"},React.createElement("label",{className:"uk-form-label"},"中文名"),React.createElement("div",{className:"uk-form-controls"},React.createElement("input",{name:"name",type:"text",ref:"name",className:"uk-width-1-1",placeholder:"1-100字符",value:this.state.name,maxLength:"100",onChange:this.handleNameChange}))),React.createElement("div",{className:"uk-form-row uk-width-1-1"},React.createElement("label",{className:"uk-form-label"},"Email"),React.createElement("div",{className:"uk-form-controls"},this.state.email)),React.createElement("div",{className:"uk-form-row uk-clearfix"},React.createElement("button",{type:"submit",className:"uk-button-primary uk-button-large uk-width-medium uk-align-center",style:e},React.createElement("i",{className:"uk-icon-check uk-icon-medium"}),"保存"))))))}});